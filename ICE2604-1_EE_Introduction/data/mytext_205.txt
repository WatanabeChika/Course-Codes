Collatz_problemThe Collatz conjecture is one of the most famous unsolved problems in mathematics.  The conjecture asks whether repeating two simple arithmetic operations will eventually transform every positive integer into 1. It concerns sequences of integers in which each term is obtained from the previous term as follows: if the previous term is even, the next term is one half of the previous term. If the previous term is odd, the next term is 3 times the previous term plus 1. The conjecture is that these sequences always reach 1, no matter which positive integer is chosen to start the sequence.It is named after mathematician Lothar Collatz, who introduced the idea in 1937, two years after receiving his doctorate.[1]  It is also known as the  problem, the  conjecture, the Ulam conjecture (after Stanisław Ulam), Kakutani's problem (after Shizuo Kakutani), the Thwaites conjecture (after Sir Bryan Thwaites), Hasse's algorithm (after Helmut Hasse), or the Syracuse problem.[2][4] The sequence of numbers involved is sometimes referred to as the hailstone sequence, hailstone numbers or hailstone numerals (because the values are usually subject to multiple descents and ascents like hailstones in a cloud),[5] or as wondrous numbers.[6]Paul Erdős said about the Collatz conjecture: "Mathematics may not be ready for such problems."[7] He also offered US$500 for its solution.[8] Jeffrey Lagarias stated in 2010 that the Collatz conjecture "is an extraordinarily difficult problem, completely out of reach of present day mathematics".[9]Consider the following operation on an arbitrary positive integer:If the number is even, divide it by two.If the number is odd, triple it and add one.In modular arithmetic notation, define the function  as follows:Now form a sequence by performing this operation repeatedly, beginning with any positive integer, and taking the result at each step as the input at the next.In notation:(that is:  is the value of  applied to  recursively  times;  (n)).The Collatz conjecture is: This process will eventually reach the number 1, regardless of which positive integer is chosen initially.If the conjecture is false, it can only be because there is some starting number which gives rise to a sequence that does not contain 1. Such a sequence would either enter a repeating cycle that excludes 1, or increase without bound. No such sequence has been found.The smallest  such that  is called the stopping time of . Similarly, the smallest  such that  is called the total stopping time of .[3] If one of the indexes  or  doesn't exist, we say that the stopping time or the total stopping time, respectively, is infinite.The Collatz conjecture asserts that the total stopping time of every  is finite. It is also equivalent to saying that every  has a finite stopping time.Since  is even whenever  is odd, one may instead use the "shortcut" form of the Collatz function:This definition yields smaller values for the stopping time and total stopping time without changing the overall dynamics of the process.For instance, starting with  and applying the function  without "shortcut", one gets the sequence 12, 6, 3, 10, 5, 16, 8, 4, 2, 1.The number  takes longer to reach 1: 19, 58, 29, 88, 44, 22, 11, 34, 17, 52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1.The sequence for , listed and graphed below, takes 111 steps (41 steps through odd numbers, in bold), climbing as high as 9232 before descending to 1.27, 82, 41, 124, 62, 31, 94, 47, 142, 71, 214, 107, 322, 161, 484, 242, 121, 364, 182, 91, 274, 137, 412, 206, 103, 310, 155, 466, 233, 700, 350, 175, 526, 263, 790, 395, 1186, 593, 1780, 890, 445, 1336, 668, 334, 167, 502, 251, 754, 377, 1132, 566, 283, 850, 425, 1276, 638, 319, 958, 479, 1438, 719, 2158, 1079, 3238, 1619, 4858, 2429, 7288, 3644, 1822, 911, 2734, 1367, 4102, 2051, 6154, 3077, 9232, 4616, 2308, 1154, 577, 1732, 866, 433, 1300, 650, 325, 976, 488, 244, 122, 61, 184, 92, 46, 23, 70, 35, 106, 53, 160, 80, 40, 20, 10, 5, 16, 8, 4, 2, 1 (sequence  in the OEIS)Numbers with a total stopping time longer than that of any smaller starting value form a sequence beginning with:1, 2, 3, 6, 7, 9, 18, 25, 27, 54, 73, 97, 129, 171, 231, 313, 327, 649, 703, 871, 1161, 2223, 2463, 2919, 3711, 6171, ... (sequence  in the OEIS).The starting values whose maximum trajectory point is greater than that of any smaller starting value are as follows:1, 2, 3, 7, 15, 27, 255, 447, 639, 703, 1819, 4255, 4591, 9663, 20895, 26623, 31911, 60975, 77671, 113383, 138367, 159487, 270271, 665215, 704511, ... (sequence  in the OEIS)Number of steps for  to reach 1 are0, 1, 7, 2, 5, 8, 16, 3, 19, 6, 14, 9, 9, 17, 17, 4, 12, 20, 20, 7, 7, 15, 15, 10, 23, 10, 111, 18, 18, 18, 106, 5, 26, 13, 13, 21, 21, 21, 34, 8, 109, 8, 29, 16, 16, 16, 104, 11, 24, 24, ... (sequence  in the OEIS)The starting value having the largest total stopping time while beingless than 10 is 9, which has 19 steps,less than 100 is 97, which has 118 steps,less than 1000 is 871, which has 178 steps,less than 104 is 6171, which has 261 steps,less than 105 is 77, which has 350 steps,less than 106 is 837, which has 524 steps,less than 107 is 8, which has 685 steps,less than 108 is 63, which has 949 steps,less than 109 is 670, which has 986 steps,less than 1010 is 9, which has 1132 steps,[10]less than 1011 is 75, which has 1228 steps,less than 1012 is 989, which has 1348 steps.[11]These numbers are the lowest ones with the indicated step count, but not necessarily the only ones below the given limit. As an example, 9 has 1132 steps, as does 9.The starting values having the smallest total stopping time with respect to their number of digits (in base 2) are the powers of two since  is halved  times to reach 1, and is never increased.Although the conjecture has not been proven, most mathematicians who have looked into the problem think the conjecture is true because experimental evidence and heuristic arguments support it.As of 2020[update], the conjecture has been checked by computer for all starting values up to 268 ≈ 2.951020.  All initial values tested so far eventually end in the repeating cycle  of period 3.[12]This computer evidence is not sufficient to prove that the conjecture is true for all starting values. As in the case of some disproved conjectures, like the Pólya conjecture, counterexamples might be found when considering very large numbers.However, such verifications may have other implications. For example, one can derive additional constraints on the period and structural form of a non-trivial cycle.[13][14][15]If one considers only the odd numbers in the sequence generated by the Collatz process, then each odd number is on average  of the previous one.[16] (More precisely, the geometric mean of the ratios of outcomes is .) This yields a heuristic argument that every Hailstone sequence should decrease in the long run, although this is not evidence against other cycles, only against divergence.  The argument is not a proof because it assumes that Hailstone sequences are assembled from uncorrelated probabilistic events.  (It does rigorously establish that the 2-adic extension of the Collatz process has two division steps for every multiplication step for almost all 2-adic starting values.)As proven by Riho Terras, almost every positive integer has a finite stopping time.[17] In other words, almost every Collatz sequence reaches a point that is strictly below its initial value. The proof is based on the distribution of parity vectors and uses the central limit theorem.In 2019, Terence Tao improved this result by showing, using logarithmic density, that almost all Collatz orbits are descending below any given function of the starting point, provided that this function diverges to infinity, no matter how slowly.  Responding to this work, Quanta Magazine wrote that Tao "came away with one of the most significant results on the Collatz conjecture in decades".[18][19]In a computer-aided proof, Krasikov and Lagarias showed that the number of integers in the interval  that eventually reach 1 is at least equal to  for all sufficiently large .[20]In this part, consider the shortcut form of the Collatz functionA cycle is a sequence  of distinct positive integers where , , ..., and .The only known cycle is  of period 2, called the trivial cycle.The length of a non-trivial cycle is known to be at least 17. In fact, Eliahou (1993) proved that the period  of any non-trivial cycle is of the form where ,  and  are non-negative integers,  and . This result is based on the continued fraction expansion of .[14]-cyclesA -cycle is a cycle that can be partitioned into  contiguous subsequences:  increasing sequences of odd numbers alternating with  decreasing sequences of even numbers.[15] For instance, if the cycle consists of a single increasing sequence of odd numbers followed by a decreasing sequence of even numbers, it is called a 1-cycle.Steiner (1977) proved that there is no 1-cycle other than the trivial .[21] Simons (2005) used Steiner's method to prove that there is no 2-cycle.[22] Simons &amp; de Weger (2005) extended this proof up to 68-cycles: there is no -cycle up to .[15] For each  beyond 68, this method gives an upper bound for the smallest term of a -cycle: for example, if there is a 77-cycle, then at least one element of the cycle is less than .[15] Along with the verification of the conjecture up to , this implies the nonexistence of a non-trivial -cycle up to .[12] As exhaustive computer searches continue, larger  values may be ruled out. To state the argument more intuitively: we need not look for cycles that have at most 77 circuits, where each circuit consists of consecutive ups followed by consecutive downs.There is another approach to prove the conjecture, which considers the bottom-upmethod of growing the so-called Collatz graph. The Collatz graph is a graph defined by the inverse relationSo, instead of proving that all positive integers eventually lead to 1, we can try to prove that 1 leads backwards to all positive integers. For any integer ,  if and only if . Equivalently,  ≡ 1 (mod 2) if and only if . Conjecturally, this inverse relation forms a tree except for the 1–2–4 loop (the inverse of the 4–2–1 loop of the unaltered function  defined in the Statement of the problem section of this article).When the relation  of the function  is replaced by the common substitute "shortcut" relation , the Collatz graph is defined by the inverse relation,For any integer ,  if and only if  ≡ 2 (mod 3). Equivalently,  ≡ 1 (mod 2) if and only if . Conjecturally, this inverse relation forms a tree except for a 1–2 loop (the inverse of the 1–2 loop of the function f(n) revised as indicated above).Alternatively, replace the   with ) where  = 3n + 1  and ) is the highest power of 2 that divides  (with no remainder).  The resulting function  maps from odd numbers to odd numbers.  Now suppose that for some odd number , applying this operation  times yields the number 1 (that is, (n) = 1).  Then in binary, the number  can be written as the concatenation of strings  where each  is a finite and contiguous extract from the representation of .[23] The representation of  therefore holds the repetends of , where each repetend is optionally rotated and then replicated up to a finite number of bits.  It is only in binary that this occurs.[24] Conjecturally, every binary string  that ends with a '1' can be reached by a representation of this form (where we may add or delete leading '0's to ).Repeated applications of the Collatz function can be represented as an abstract machine that handles strings of bits.  The machine will perform the following three steps on any odd number until only one  remains:Append  to the (right) end of the number in binary (giving );Add this to the original number by binary addition (giving );Remove all trailing s (that is, repeatedly divide by 2 until the result is odd).The starting number 7 is written in base two as .  The resulting Collatz sequence is:For this section, consider the Collatz function  in the slightly modified formThis can be done because when  is odd,  is always even.If  is the parity of a number, that is  and , then we can define the Collatz parity sequence (or parity vector) for a number  as , where , and .Which operation is performed,  or , depends on the parity. The parity sequence is the same as the sequence of operations.Using this form for , it can be shown that the parity sequences for two numbers  and  will agree in the first  terms if and only if  and  are equivalent modulo .  This implies that every number is uniquely identified by its parity sequence, and moreover that if there are multiple Hailstone cycles, then their corresponding parity cycles must be different.[3][17]Applying the  function  times to the number  will give the result , where  is the result of applying the  function  times to , and  is how many increases were encountered during that sequence.  For example, for  there are 3 increases as 1 iterates to 2, 1, 2, 1, and finally to 2 so the result is ; for  there is only 1 increase as 1 rises to 2 and falls to 1 so the result is . When  is  then there will be  rises and the result will be . The factor of 3 multiplying  is independent of the value of ; it depends only on the behavior of . This allows one to predict that certain forms of numbers will always lead to a smaller number after a certain number of iterations: for example,  becomes  after two applications of  and  becomes  after 4 applications of . Whether those smaller numbers continue to 1, however, depends on the value of .For the Collatz function in the formHailstone sequences can be computed by the 2-tag system with production rules, , .In this system, the positive integer  is represented by a string of  copies of , and iteration of the tag operation halts on any word of length less than 2. (Adapted from De Mol.)The Collatz conjecture equivalently states that this tag system, with an arbitrary finite string of  as the initial word, eventually halts (see Tag system for a worked example).An extension to the Collatz conjecture is to include all integers, not just positive integers. Leaving aside the cycle 0 → 0 which cannot be entered from outside, there are a total of four known cycles, which all nonzero integers seem to eventually fall into under iteration of .  These cycles are listed here, starting with the well-known cycle for positive :Odd values are listed in large bold. Each cycle is listed with its member of least absolute value (which is always odd) first.CycleOdd-value cycle lengthFull cycle length1 → 4 → 2 → 1 ...13−1 → −2 → −1 ...12−5 → −14 → −7 → −20 → −10 → −5 ...25−17 → −50 → −25 → −74 → −37 → −110 → −55 → −164 → −82 → −41 → −122 → −61 → −182 → −91 → −272 → −136 → −68 → −34 → −17 ...718The generalized Collatz conjecture is the assertion that every integer, under iteration by , eventually falls into one of the four cycles above or the cycle 0 → 0. (The 0 → 0 cycle is only included for the sake of completeness.)The Collatz map can be extended to (positive or negative) rational numbers which have odd denominators when written in lowest terms. The number is taken to be 'odd' or 'even' according to whether its numerator is odd or even.  Then the formula for the map is exactly the same as when the domain is the integers: an 'even' such rational is divided by 2; an 'odd' such rational is multiplied by 3 and then 1 is added. A closely related fact is that the Collatz map extends to the ring of 2-adic integers, which contains the ring of rationals with odd denominators as a subring.When using the "shortcut" definition of the Collatz map, it is known that any periodic parity sequence is generated by exactly one rational.[25] Conversely, it is conjectured that every rational with an odd denominator has an eventually cyclic parity sequence (Periodicity Conjecture[3]).If a parity cycle has length  and includes odd numbers exactly  times at indices , then the unique rational which generates immediately and periodically this parity cycle is()For example, the parity cycle  has length 7 and four odd terms at indices 0, 2, 3, and 6. It is repeatedly generated by the fractionas the latter leads to the rational cycle Any cyclic permutation of  is associated to one of the above fractions. For instance, the cycle  is produced by the fractionFor a one-to-one correspondence, a parity cycle should be irreducible, that is, not partitionable into identical sub-cycles. As an illustration of this, the parity cycle  and its sub-cycle  are associated to the same fraction  when reduced to lowest terms.In this context, assuming the validity of the Collatz conjecture implies that  and  are the only parity cycles generated by positive whole numbers (1 and 2, respectively).If the odd denominator  of a rational is not a multiple of 3, then all the iterates have the same denominator and the sequence of numerators can be obtained by applying the " " generalization[26] of the Collatz functionThe function is well-defined on the ring  of 2-adic integers, where it is continuous and measure-preserving with respect to the 2-adic measure. Moreover, its dynamics is known to be ergodic.[3]Define the parity vector function  acting on  asThe function  is a 2-adic isometry.[27] Consequently, every infinite parity sequence occurs for exactly one 2-adic integer, so that almost all trajectories are acyclic in .An equivalent formulation of the Collatz conjecture is thatThe Collatz map (with shortcut) can be viewed as the restriction to the integers of the smooth mapThe iterations of this map on the real line lead to a dynamical system, further investigated by Chamberland.[28]He showed that the conjecture does not hold for positive real numbers since there are infinitely many fixed points, as well as orbits escaping monotonically to infinity. The function  has two attracting cycles of period 2,  and . Moreover, the set of unbounded orbits is conjectured to be of measure 0.Letherman, Schleicher, and Wood extended the study to the complex plane, where most of the points have orbits that diverge to infinity (colored region on the illustration).[29] The boundary between the colored region and the black components, namely the Julia set of , is a fractal pattern, sometimes called the "Collatz fractal".The section As a parity sequence above gives a way to speed up simulation of the sequence.  To jump ahead  steps on each iteration (using the  function from that section), break up the current number into two parts,  (the  least significant bits, interpreted as an integer), and  (the rest of the bits as an integer).  The result of jumping ahead  steps can be found as:(2ka + b) = 3c(b)a + d(b).The  (or better ) and  arrays are precalculated for all possible -bit numbers , where  is the result of applying the  function  times to , and  is the number of odd numbers encountered on the way.[30]  For example, if , one can jump ahead 5 steps on each iteration by separating out the 5 least significant bits of a number and using:(0...31) = { 0, 3, 2, 2, 2, 2, 2, 4, 1, 4, 1, 3, 2, 2, 3, 4, 1, 2, 3, 3, 1, 1, 3, 3, 2, 3, 2, 4, 3, 3, 4, 5 }(0...31) = { 0, 2, 1, 1, 2, 2, 2, 20, 1, 26, 1, 10, 4, 4, 13, 40, 2, 5, 17, 17, 2, 2, 20, 20, 8, 22, 8, 71, 26, 26, 80, 242 }.This requires  precomputation and storage to speed up the resulting calculation by a factor of , a space–time tradeoff.For the special purpose of searching for a counterexample to the Collatz conjecture, this precomputation leads to an even more important acceleration, used by Tomás Oliveira e Silva in his computational confirmations of the Collatz conjecture up to large values of .  If, for some given  and , the inequality(2ka + b)  = 3c(b)a + d(b) &lt; 2ka + bholds for all , then the first counterexample, if it exists, cannot be  modulo .[13]  For instance, the first counterexample must be odd because , smaller than ; and it must be 3 mod 4 because (4n + 1) = 3n + 1, smaller than .  For each starting value  which is not a counterexample to the Collatz conjecture, there is a  for which such an inequality holds, so checking the Collatz conjecture for one starting value is as good as checking an entire congruence class.  As  increases, the search only needs to check those residues  that are not eliminated by lower values of .  Only an exponentially small fraction of the residues survive.[31] For example, the only surviving residues mod 32 are 7, 15, 27, and 31.If  is an odd integer, then  is even, so  with  odd and .  The Syracuse function is the function  from the set  of odd integers into itself, for which  (sequence  in the OEIS).Some properties of the Syracuse function are:For all , . (Because .)In more generality: For all  and odd , (2ph − 1) = 2 × 3p − 1h − 1. (Here  is function iteration notation.)For all odd , The Collatz conjecture is equivalent to the statement that, for all  in , there exists an integer  such that (k) = 1.In 1972, John Horton Conway proved that a natural generalization of the Collatz problem is algorithmically undecidable.[32]Specifically, he considered functions of the formand  are rational numbers which are so chosen that  is always an integer.The standard Collatz function is given by , , , , . Conway proved that the problem:Given  and , does the sequence of iterates  reach 1?is undecidable, by representing the halting problem in this way.Closer to the Collatz problem is the following universally quantified problem:Given  does the sequence of iterates  reach 1, for all ?Modifying the condition in this way can make a problem either harder or easier to solve (intuitively, it is harder to justify a positive answer but might be easier to justify a negative one). Kurtz and Simon[33] proved that the above problem is, in fact, undecidable and even higher in the arithmetical hierarchy, specifically -complete. This hardness result holds even if one restricts the class of functions  by fixing the modulus  to 6480.[34]In the movie Incendies, a graduate student in pure mathematics explains the Collatz conjecture to a group of undergraduates. She puts her studies on hold for a time to address some unresolved questions about her family's past. Late in the movie, the Collatz conjecture turns out to have foreshadowed a disturbing and difficult discovery that she makes about her family.[35][36] semigroupArithmetic dynamicsModular arithmeticResidue-class-wise affine groupThe Ultimate Challenge: The  + 1  Problem,[9] published in 2010 by the American Mathematical Society and edited by Jeffrey Lagarias, is a compendium of information on the Collatz conjecture, methods of approaching it, and generalizations. It includes two survey papers by the editor and five by other authors concerning the history of the problem, generalizations, statistical approaches, and results from the theory of computation. It also includes reprints of early papers on the subject, including the paper by Lothar Collatz.Matthews, Keith. " + 1 page".An ongoing volunteer computing project Archived 2021-08-30 at the Wayback Machine by David Bařina verifies Convergence of the Collatz conjecture for large values. (furthest progress so far)(BOINC) volunteer computing project that verifies the Collatz conjecture for larger values.An ongoing volunteer computing project by Eric Roosendaal verifies the Collatz conjecture for larger and larger values.Another ongoing volunteer computing project by Tomás Oliveira e Silva continues to verify the Collatz conjecture (with fewer statistics than Eric Roosendaal's page but with further progress made).Collatz Problem at PlanetMath..Nochella, Jesse. "Collatz Paths". Wolfram Demonstrations Project.Eisenbud, D. (8 August 2016). Uncrackable? The Collatz conjecture (short video). Numberphile. Archived from the original on 2021-12-11 – via YouTube.Eisenbud, D. (August 9, 2016). Uncrackable? Collatz conjecture (extra footage). Numberphile. Archived from the original on 2021-12-11 – via YouTube.Alex Kontorovich (featuring) (30 July 2021). The simplest math problem no one can solve (short video). Veritasium – via YouTube.Are computers ready to solve this notoriously unwieldy math problem?