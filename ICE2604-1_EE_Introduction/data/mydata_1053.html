<!DOCTYPE html>
<html>
<head>
<title>2-choice_hashing</title>
</head>
<body>
<div class="mw-parser-output"><style data-mw-deduplicate="TemplateStyles:r1097763485">.mw-parser-output .ambox{border:1px solid #a2a9b1;border-left:10px solid #36c;background-color:#fbfbfb;box-sizing:border-box}.mw-parser-output .ambox+link+.ambox,.mw-parser-output .ambox+link+style+.ambox,.mw-parser-output .ambox+link+link+.ambox,.mw-parser-output .ambox+.mw-empty-elt+link+.ambox,.mw-parser-output .ambox+.mw-empty-elt+link+style+.ambox,.mw-parser-output .ambox+.mw-empty-elt+link+link+.ambox{margin-top:-1px}html body.mediawiki .mw-parser-output .ambox.mbox-small-left{margin:4px 1em 4px 0;overflow:hidden;width:238px;border-collapse:collapse;font-size:88%;line-height:1.25em}.mw-parser-output .ambox-speedy{border-left:10px solid #b32424;background-color:#fee7e6}.mw-parser-output .ambox-delete{border-left:10px solid #b32424}.mw-parser-output .ambox-content{border-left:10px solid #f28500}.mw-parser-output .ambox-style{border-left:10px solid #fc3}.mw-parser-output .ambox-move{border-left:10px solid #9932cc}.mw-parser-output .ambox-protection{border-left:10px solid #a2a9b1}.mw-parser-output .ambox .mbox-text{border:none;padding:0.25em 0.5em;width:100%}.mw-parser-output .ambox .mbox-image{border:none;padding:2px 0 2px 0.5em;text-align:center}.mw-parser-output .ambox .mbox-imageright{border:none;padding:2px 0.5em 2px 0;text-align:center}.mw-parser-output .ambox .mbox-empty-cell{border:none;padding:0;width:1px}.mw-parser-output .ambox .mbox-image-div{width:52px}html.client-js body.skin-minerva .mw-parser-output .mbox-text-span{margin-left:23px!important}@media(min-width:720px){.mw-parser-output .ambox{margin:0 10%}}</style><table class="box-Original_research plainlinks metadata ambox ambox-content ambox-Original_research" role="presentation"><tbody><tr><td class="mbox-image"></td><td class="mbox-text"></td></tr></tbody></table>
<p><b>2-choice hashing</b>, also known as <b>2-choice chaining</b>, is "a variant of a hash table in which keys are added by hashing with two hash functions. The key is put in the array position with the fewer (colliding) keys. Some collision resolution scheme is needed, unless keys are kept in buckets. The average-case cost of a successful search is <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math alttext="{\displaystyle O(2+(m-1)/n)}" xmlns="http://www.w3.org/1998/Math/MathML">
<semantics>
<mrow class="MJX-TeXAtom-ORD">
<mstyle displaystyle="true" scriptlevel="0">
<mi>O</mi>
<mo stretchy="false">(</mo>
<mn>2</mn>
<mo>+</mo>
<mo stretchy="false">(</mo>
<mi>m</mi>
<mo>−<!-- − --></mo>
<mn>1</mn>
<mo stretchy="false">)</mo>
<mrow class="MJX-TeXAtom-ORD">
<mo>/</mo>
</mrow>
<mi>n</mi>
<mo stretchy="false">)</mo>
</mstyle>
</mrow>
<annotation encoding="application/x-tex">{\displaystyle O(2+(m-1)/n)}</annotation>
</semantics>
</math></span><img alt="{\displaystyle O(2+(m-1)/n)}" aria-hidden="true" class="mwe-math-fallback-image-inline" src="https://wikimedia.org/api/rest_v1/media/math/render/svg/148203508320861416783163cb5252f39a7fe474" style="vertical-align: -0.838ex; width:17.995ex; height:2.843ex;"/></span>, where <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math alttext="{\displaystyle m}" xmlns="http://www.w3.org/1998/Math/MathML">
<semantics>
<mrow class="MJX-TeXAtom-ORD">
<mstyle displaystyle="true" scriptlevel="0">
<mi>m</mi>
</mstyle>
</mrow>
<annotation encoding="application/x-tex">{\displaystyle m}</annotation>
</semantics>
</math></span><img alt="m" aria-hidden="true" class="mwe-math-fallback-image-inline" src="https://wikimedia.org/api/rest_v1/media/math/render/svg/0a07d98bb302f3856cbabc47b2b9016692e3f7bc" style="vertical-align: -0.338ex; width:2.04ex; height:1.676ex;"/></span> is the number of keys and <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math alttext="{\displaystyle n}" xmlns="http://www.w3.org/1998/Math/MathML">
<semantics>
<mrow class="MJX-TeXAtom-ORD">
<mstyle displaystyle="true" scriptlevel="0">
<mi>n</mi>
</mstyle>
</mrow>
<annotation encoding="application/x-tex">{\displaystyle n}</annotation>
</semantics>
</math></span><img alt="n" aria-hidden="true" class="mwe-math-fallback-image-inline" src="https://wikimedia.org/api/rest_v1/media/math/render/svg/a601995d55609f2d9f5e233e36fbe9ea26011b3b" style="vertical-align: -0.338ex; width:1.395ex; height:1.676ex;"/></span> is the size of the array. The most collisions is <span class="mwe-math-element"><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math alttext="{\displaystyle \log _{2}\ln n+\theta (m/n)}" xmlns="http://www.w3.org/1998/Math/MathML">
<semantics>
<mrow class="MJX-TeXAtom-ORD">
<mstyle displaystyle="true" scriptlevel="0">
<msub>
<mi>log</mi>
<mrow class="MJX-TeXAtom-ORD">
<mn>2</mn>
</mrow>
</msub>
<mo>⁡<!-- ⁡ --></mo>
<mi>ln</mi>
<mo>⁡<!-- ⁡ --></mo>
<mi>n</mi>
<mo>+</mo>
<mi>θ<!-- θ --></mi>
<mo stretchy="false">(</mo>
<mi>m</mi>
<mrow class="MJX-TeXAtom-ORD">
<mo>/</mo>
</mrow>
<mi>n</mi>
<mo stretchy="false">)</mo>
</mstyle>
</mrow>
<annotation encoding="application/x-tex">{\displaystyle \log _{2}\ln n+\theta (m/n)}</annotation>
</semantics>
</math></span><img alt="\log_2 \ln n + \theta(m/n)" aria-hidden="true" class="mwe-math-fallback-image-inline" src="https://wikimedia.org/api/rest_v1/media/math/render/svg/86bc934767d583f03f148169490b465439afa5ce" style="vertical-align: -0.838ex; width:18.472ex; height:2.843ex;"/></span> with high probability."<sup class="reference" id="cite_ref-1">[1]</sup>
</p>

<h2><span class="mw-headline" id="How_it_works">How it works</span><span class="mw-editsection"></span></h2>
<p>2-choice hashing utilizes two hash functions <i>h</i><sub>1</sub>(<i>x</i>) and <i>h</i><sub>2</sub>(<i>x</i>) which work as hash functions are expected to work (i.e. mapping integers from the universe into a specified range). The two hash functions should be independent and have no correlation to each other. Having two hash functions allows any key <i>x</i> to have up to two potential locations to be stored based on the values of the respective outputs, <i>h</i><sub>1</sub>(<i>x</i>) and  <i>h</i><sub>2</sub>(<i>x</i>). It is important to note that, although there are two hash functions, there is only one table; both hash functions map to locations on that table.
</p>
<h2><span class="mw-headline" id="Implementation">Implementation</span><span class="mw-editsection"></span></h2>
<p>The most important functions of the hashing implementation in this case are insertion and search.
</p>
<ul><li><b>Insertion:</b> When inserting the values of both hash functions are computed for the to-be-inserted object. The object is then placed in the bucket which contains fewer objects. If the buckets are equal in size, the default location is the <i>h</i><sub>1</sub>(<i>x</i>) value.</li>
<li><b>Search:</b> Effective searches are done by looking in both buckets (the bucket locations to which <i>h</i><sub>1</sub>(<i>x</i>) and <i>h</i><sub>2</sub>(<i>x</i>) mapped) for the desired value.</li></ul>
<h2><span class="mw-headline" id="Performance">Performance</span><span class="mw-editsection"></span></h2>
<p>As is true with all hash tables, the performance is based on the largest bucket. Although there are instances where bucket sizes happen to be large based on the values and the hash functions used, this is rare. Having two hash functions and, therefore, two possible locations for any one value, makes the possibility of large buckets even more unlikely to happen.
</p><p>The expected bucket size while using 2-choice hashing is: <span class="texhtml"><i>θ</i>(log(log(<i>n</i>)))</span>. This improvement is due to the randomized concept known as The Power of Two Choices.
</p><p>Using two hash functions offers substantial benefits over a single hash function. There is little improvement (and no change to the expected order statistics) if more than two hash functions are used: "Additional hash functions only decrease the maximum by a constant factor."<sup class="reference" id="cite_ref-2">[2]</sup>
</p><p>Some people recommend a type of 2-choice hashing called two-way skewed-associative cache in some CPU caches.<sup class="reference" id="cite_ref-3">[3]</sup>
</p><p>2-left hashing—using two hash tables of equal size <i>n</i>/2, and asymmetrically resolving ties by putting the key in the left hash table—has fewer collisions and therefore better performance than 2-choice hashing with one large hash table of size <i>n</i>.<sup class="reference" id="cite_ref-4">[4]</sup><sup class="noprint Inline-Template" style="white-space:nowrap;">[<i><span title="A complete citation is needed. (March 2020)">full citation needed</span></i>]</sup>
</p>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"></span></h2>
<style data-mw-deduplicate="TemplateStyles:r1011085734">.mw-parser-output .reflist{font-size:90%;margin-bottom:0.5em;list-style-type:decimal}.mw-parser-output .reflist .references{font-size:100%;margin-bottom:0;list-style-type:inherit}.mw-parser-output .reflist-columns-2{column-width:30em}.mw-parser-output .reflist-columns-3{column-width:25em}.mw-parser-output .reflist-columns{margin-top:0.3em}.mw-parser-output .reflist-columns ol{margin-top:0}.mw-parser-output .reflist-columns li{page-break-inside:avoid;break-inside:avoid-column}.mw-parser-output .reflist-upper-alpha{list-style-type:upper-alpha}.mw-parser-output .reflist-upper-roman{list-style-type:upper-roman}.mw-parser-output .reflist-lower-alpha{list-style-type:lower-alpha}.mw-parser-output .reflist-lower-greek{list-style-type:lower-greek}.mw-parser-output .reflist-lower-roman{list-style-type:lower-roman}</style>
<p><img alt="Public Domain" class="noviewer" data-file-height="196" data-file-width="196" decoding="async" height="12" src="//upload.wikimedia.org/wikipedia/en/thumb/6/62/PD-icon.svg/12px-PD-icon.svg.png" srcset="//upload.wikimedia.org/wikipedia/en/thumb/6/62/PD-icon.svg/18px-PD-icon.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/6/62/PD-icon.svg/24px-PD-icon.svg.png 2x" width="12"/> This article incorporates public domain material from <link href="mw-data:TemplateStyles:r1067248974" rel="mw-deduplicated-inline-style"/><cite class="citation cs1" id="CITEREFPaul_E._Black">Paul E. Black. "2-choice hashing". <i>Dictionary of Algorithms and Data Structures</i>. NIST.</cite><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=Dictionary+of+Algorithms+and+Data+Structures&amp;rft.atitle=2-choice+hashing&amp;rft.au=Paul+E.+Black&amp;rft_id=https%3A%2F%2Fxlinux.nist.gov%2Fdads%2FHTML%2FtwoChoiceHashing.html&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A2-choice+hashing"></span>
</p>
<h2><span class="mw-headline" id="Further_reading">Further reading</span><span class="mw-editsection"></span></h2>
<ul><li><link href="mw-data:TemplateStyles:r1067248974" rel="mw-deduplicated-inline-style"/><cite class="citation cs2" id="CITEREFAzarBroderKarlinUpfal1994">Azar, Yossi; Broder, Andrei Z.; Karlin, Anna R.; Upfal, Eli (23–25 May 1994), "Balanced Allocations (extended abstract)" <span class="cs1-format">(PDF)</span>, <i>Proceedings of the twenty-sixth annual ACM symposium on Theory of computing - STOC '94</i>, Montréal, pp. 593–602, CiteSeerX <span class="cs1-lock-free" title="Freely accessible">10.1.1.38.5375</span>, doi:10.1145/195058.195412, ISBN <bdi>0897916638</bdi>, S2CID 1014349</cite><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.atitle=Balanced+Allocations+%28extended+abstract%29&amp;rft.btitle=Proceedings+of+the+twenty-sixth+annual+ACM+symposium+on+Theory+of+computing+-+STOC+%2794&amp;rft.place=Montr%C3%A9al&amp;rft.pages=593-602&amp;rft.date=1994-05-23%2F1994-05-25&amp;rft_id=%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fsummary%3Fdoi%3D10.1.1.38.5375%23id-name%3DCiteSeerX&amp;rft_id=https%3A%2F%2Fapi.semanticscholar.org%2FCorpusID%3A1014349%23id-name%3DS2CID&amp;rft_id=info%3Adoi%2F10.1145%2F195058.195412&amp;rft.isbn=0897916638&amp;rft.aulast=Azar&amp;rft.aufirst=Yossi&amp;rft.au=Broder%2C+Andrei+Z.&amp;rft.au=Karlin%2C+Anna+R.&amp;rft.au=Upfal%2C+Eli&amp;rft_id=https%3A%2F%2Fwww.cc.gatech.edu%2F~vigoda%2FRandAlgs%2FBCSV.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A2-choice+hashing"></span></li>
<li><link href="mw-data:TemplateStyles:r1067248974" rel="mw-deduplicated-inline-style"/><cite class="citation cs2" id="CITEREFAzarBroderKarlinUpfal1999">Azar, Yossi; Broder, Andrei Z.; Karlin, Anna R.; Upfal, Eli (1999), "Balanced Allocations" <span class="cs1-format">(PDF)</span>, <i>SIAM J. Comput.</i>, <b>29</b> (1): 180–200, doi:10.1137/S0097539795288490</cite><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Ajournal&amp;rft.genre=article&amp;rft.jtitle=SIAM+J.+Comput.&amp;rft.atitle=Balanced+Allocations&amp;rft.volume=29&amp;rft.issue=1&amp;rft.pages=180-200&amp;rft.date=1999&amp;rft_id=info%3Adoi%2F10.1137%2FS0097539795288490&amp;rft.aulast=Azar&amp;rft.aufirst=Yossi&amp;rft.au=Broder%2C+Andrei+Z.&amp;rft.au=Karlin%2C+Anna+R.&amp;rft.au=Upfal%2C+Eli&amp;rft_id=https%3A%2F%2Fcs.brown.edu%2Fpeople%2Feupfal%2Fpapers%2FSICOMP29.pdf&amp;rfr_id=info%3Asid%2Fen.wikipedia.org%3A2-choice+hashing"></span></li></ul>
<!-- 
NewPP limit report
Parsed by mw1416
Cached time: 20221214174502
Cache expiry: 1814400
Reduced expiry: false
Complications: [vary‐revision‐sha1, show‐toc]
CPU time usage: 0.182 seconds
Real time usage: 0.266 seconds
Preprocessor visited node count: 940/1000000
Post‐expand include size: 29137/2097152 bytes
Template argument size: 1155/2097152 bytes
Highest expansion depth: 19/100
Expensive parser function count: 3/500
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 15174/5000000 bytes
Lua time usage: 0.125/10.000 seconds
Lua memory usage: 5095573/52428800 bytes
Number of Wikibase entities loaded: 0/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  210.043      1 -total
 48.77%  102.430      1 Template:Reflist
 46.58%   97.831      3 Template:DADS
 45.65%   95.878      9 Template:If_empty
 27.95%   58.709      1 Template:Original_research
 22.32%   46.883      1 Template:Ambox
  8.28%   17.401      1 Template:Full_citation_needed
  7.41%   15.562      1 Template:Fix
  6.74%   14.151      2 Template:Citation
  4.21%    8.840      4 Template:Delink
-->
<!-- Saved in parser cache with key enwiki:pcache:idhash:4436335-0!canonical and timestamp 20221214174502 and revision id 1065221947.
 -->
</div></body>
</html>