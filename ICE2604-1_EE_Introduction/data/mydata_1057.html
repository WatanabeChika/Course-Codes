<!DOCTYPE html>
<html>
<head>
<title>2-3-4_tree</title>
</head>
<body>
<div class="mw-parser-output"><style data-mw-deduplicate="TemplateStyles:r1066479718">.mw-parser-output .infobox-subbox{padding:0;border:none;margin:-3px;width:auto;min-width:100%;font-size:100%;clear:none;float:none;background-color:transparent}.mw-parser-output .infobox-3cols-child{margin:auto}.mw-parser-output .infobox .navbar{font-size:100%}body.skin-minerva .mw-parser-output .infobox-header,body.skin-minerva .mw-parser-output .infobox-subheader,body.skin-minerva .mw-parser-output .infobox-above,body.skin-minerva .mw-parser-output .infobox-title,body.skin-minerva .mw-parser-output .infobox-image,body.skin-minerva .mw-parser-output .infobox-full-data,body.skin-minerva .mw-parser-output .infobox-below{text-align:center}</style><table class="infobox"><tbody><tr><th class="infobox-above" colspan="2">2–3–4 tree</th></tr><tr><th class="infobox-label" scope="row">Type</th><td class="infobox-data">tree</td></tr><tr><th class="infobox-header" colspan="2">Time complexity in big O notation</th></tr><tr><td class="infobox-full-data" colspan="2"><link href="mw-data:TemplateStyles:r1066479718" rel="mw-deduplicated-inline-style"/><table class="infobox-subbox infobox-3cols-child"><tbody><tr><th class="infobox-label" scope="row" style="white-space:nowrap;">Algorithm</th><td class="infobox-data infobox-data-a">
<b>Average</b></td><td class="infobox-data infobox-data-b">
<b>Worst case</b></td></tr><tr><th class="infobox-label" scope="row" style="white-space:nowrap;">Space</th><td class="infobox-data infobox-data-a">
<span class="texhtml">O(<i>n</i>)</span></td><td class="infobox-data infobox-data-b">
<span class="texhtml">O(<i>n</i>)</span></td></tr><tr><th class="infobox-label" scope="row" style="white-space:nowrap;">Search</th><td class="infobox-data infobox-data-a">
<span class="texhtml">O(log <i>n</i>)</span></td><td class="infobox-data infobox-data-b">
<span class="texhtml">O(log <i>n</i>)</span></td></tr><tr><th class="infobox-label" scope="row" style="white-space:nowrap;">Insert</th><td class="infobox-data infobox-data-a">
<span class="texhtml">O(log <i>n</i>)</span></td><td class="infobox-data infobox-data-b">
<span class="texhtml">O(log <i>n</i>)</span></td></tr><tr><th class="infobox-label" scope="row" style="white-space:nowrap;">Delete</th><td class="infobox-data infobox-data-a">
<span class="texhtml">O(log <i>n</i>)</span></td><td class="infobox-data infobox-data-b">
<span class="texhtml">O(log <i>n</i>)</span></td></tr></tbody></table></td></tr></tbody></table>
<p>In computer science, a <b>2–3–4 tree</b> (also called a <b>2–4 tree</b>) is a self-balancing data structure that can be used to implement dictionaries. The numbers mean a tree where every node with children (internal node) has either two, three, or four child nodes:
</p>
<ul><li>a 2-node has one data element, and if internal has two child nodes;</li>
<li>a 3-node has two data elements, and if internal has three child nodes;</li>
<li>a 4-node has three data elements, and if internal has four child nodes;</li></ul>
<ul class="gallery mw-gallery-traditional">
<li class="gallerybox" style="width: 155px"></li>
<li class="gallerybox" style="width: 155px"></li>
<li class="gallerybox" style="width: 155px"></li>
</ul>
<p>2–3–4 trees are B-trees of order 4;<sup class="reference" id="cite_ref-1">[1]</sup> like B-trees in general, they can search, insert and delete in O(log <i>n</i>) time. One property of a 2–3–4 tree is that all external nodes are at the same depth.
</p><p>2–3–4 trees are isomorphic to red–black trees, meaning that they are equivalent data structures.  In other words, for every 2–3–4 tree, there exists at least one red–black tree with data elements in the same order. Moreover, insertion and deletion operations on 2–3–4 trees that cause node expansions, splits and merges are equivalent to the color-flipping and rotations in red–black trees.  Introductions to red–black trees usually introduce 2–3–4 trees first, because they are conceptually simpler.  2–3–4 trees, however, can be difficult to implement in most programming languages because of the large number of special cases involved in operations on the tree.  Red–black trees are simpler to implement,<sup class="reference" id="cite_ref-2">[2]</sup> so tend to be used instead.
</p>

<h2><span class="mw-headline" id="Properties">Properties</span><span class="mw-editsection"></span></h2>
<ul><li>Every node (leaf or internal) is a 2-node, 3-node or a 4-node, and holds one, two, or three data elements, respectively.</li>
<li>All leaves are at the same depth (the bottom level).</li>
<li>All data is kept in sorted order.</li></ul>
<h2><span class="mw-headline" id="Insertion">Insertion</span><span class="mw-editsection"></span></h2>
<p>To insert a value, we start at the root of the 2–3–4 tree:
</p>
<ol><li>If the current node is a 4-node:
<ul><li>Remove and save the middle value to get a 3-node.</li>
<li>Split the remaining 3-node up into a pair of 2-nodes (the now missing middle value is handled in the next step).</li>
<li>If this is the root node (which thus has no parent):
<ul><li>the middle value becomes the new root 2-node and the tree height increases by 1.  Ascend into the root.</li></ul></li>
<li>Otherwise, push the middle value up into the parent node.  Ascend into the parent node.</li></ul></li>
<li>Find the child whose interval contains the value to be inserted.</li>
<li>If that child is a leaf, insert the value into the child node and finish.
<ul><li>Otherwise, descend into the child and repeat from step 1.<sup class="reference" id="cite_ref-ford_3-0">[3]</sup><sup class="reference" id="cite_ref-goodrich_4-0">[4]</sup></li></ul></li></ol>
<h3><span class="mw-headline" id="Example">Example</span><span class="mw-editsection"></span></h3>
<p>To insert the value "25" into this 2–3–4 tree:
</p>
<dl><dd><img alt="2-3-4-tree-insertion-stage-1.svg" data-file-height="196" data-file-width="421" decoding="async" height="143" src="//upload.wikimedia.org/wikipedia/commons/thumb/7/73/2-3-4-tree-insertion-stage-1.svg/308px-2-3-4-tree-insertion-stage-1.svg.png" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/7/73/2-3-4-tree-insertion-stage-1.svg/462px-2-3-4-tree-insertion-stage-1.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/7/73/2-3-4-tree-insertion-stage-1.svg/616px-2-3-4-tree-insertion-stage-1.svg.png 2x" width="308"/></dd></dl>
<ul><li>Begin at the root (10, 20) and descend towards the rightmost child (22, 24, 29).  (Its interval (20, ∞) contains 25.)</li>
<li>Node (22, 24, 29) is a 4-node, so its middle element 24 is pushed up into the parent node.</li></ul>
<dl><dd><img alt="2-3-4-tree-insertion-stage-2.svg" data-file-height="196" data-file-width="365" decoding="async" height="147" src="//upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2-3-4-tree-insertion-stage-2.svg/274px-2-3-4-tree-insertion-stage-2.svg.png" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2-3-4-tree-insertion-stage-2.svg/411px-2-3-4-tree-insertion-stage-2.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2-3-4-tree-insertion-stage-2.svg/548px-2-3-4-tree-insertion-stage-2.svg.png 2x" width="274"/></dd></dl>
<ul><li>The remaining 3-node (22, 29) is split into a pair of 2-nodes (22) and (29). Ascend back into the new parent (10, 20, 24).</li>
<li>Descend towards the rightmost child (29).  (Its interval (24, ∞) contains 25.)</li></ul>
<dl><dd><img alt="2-3-4-tree-insertion-stage-3.svg" data-file-height="196" data-file-width="421" decoding="async" height="140" src="//upload.wikimedia.org/wikipedia/commons/thumb/c/c8/2-3-4-tree-insertion-stage-3.svg/300px-2-3-4-tree-insertion-stage-3.svg.png" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/c/c8/2-3-4-tree-insertion-stage-3.svg/450px-2-3-4-tree-insertion-stage-3.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/c/c8/2-3-4-tree-insertion-stage-3.svg/600px-2-3-4-tree-insertion-stage-3.svg.png 2x" width="300"/></dd></dl>
<ul><li>Node (29) has no leftmost child. (The child for interval (24, 29) is empty.)  Stop here and insert value 25 into this node.</li></ul>
<dl><dd><img alt="2-3-4-tree-insertion-stage-4.svg" data-file-height="196" data-file-width="478" decoding="async" height="143" src="//upload.wikimedia.org/wikipedia/commons/thumb/8/8b/2-3-4-tree-insertion-stage-4.svg/349px-2-3-4-tree-insertion-stage-4.svg.png" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/8/8b/2-3-4-tree-insertion-stage-4.svg/524px-2-3-4-tree-insertion-stage-4.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/8/8b/2-3-4-tree-insertion-stage-4.svg/698px-2-3-4-tree-insertion-stage-4.svg.png 2x" width="349"/></dd></dl>
<h2><span class="mw-headline" id="Deletion">Deletion</span><span class="mw-editsection"></span></h2>
<p>The simplest possibility to delete an element is to just leave the element there and mark it as "deleted", adapting the previous algorithms so that deleted elements are ignored. Deleted elements can then be re-used by overwriting them when performing an insertion later. However, the drawback of this method is that the size of the tree does not decrease. If a large proportion of the elements of the tree are deleted, then the tree will become much larger than the current size of the stored elements, and the performance of other operations will be adversely affected by the deleted elements.
</p><p>When this is undesirable, the following algorithm can be followed to remove a value from the 2–3–4 tree:
</p>
<ol><li>Find the element to be deleted.
<ul><li>If the element is not in a leaf node, remember its location and continue searching until a leaf, which will contain the element's successor, is reached. The successor can be either the largest key that is smaller than the one to be removed, or the smallest key that is larger than the one to be removed. It is simplest to make adjustments to the tree from the top down such that the leaf node found is not a 2-node. That way, after the swap, there will not be an empty leaf node.</li>
<li>If the element is in a 2-node leaf, just make the adjustments below.</li></ul></li></ol>
<p>Make the following adjustments when a 2-node – except the root node – is encountered on the way to the leaf we want to remove:
</p>
<ol><li>If a sibling on either side of this node is a 3-node or a 4-node (thus having more than 1 key), perform a rotation with that sibling:
<ul><li>The key from the other sibling closest to this node moves up to the parent key that overlooks the two nodes.</li>
<li>The parent key moves down to this node to form a 3-node.</li>
<li>The child that was originally with the rotated sibling key is now this node's additional child.</li></ul></li>
<li>If the parent is a 2-node and the sibling is also a 2-node, combine all three elements to form a new 4-node and shorten the tree.  (This rule can only trigger if the parent 2-node is the root, since all other 2-nodes along the way will have been modified to not be 2-nodes.  This is why "shorten the tree" here preserves balance; this is also an important assumption for the fusion operation.)</li>
<li>If the parent is a 3-node or a 4-node and all adjacent siblings are 2-nodes, do a fusion operation with the parent and an adjacent sibling:
<ul><li>The adjacent sibling and the parent key overlooking the two sibling nodes come together to form a 4-node.</li>
<li>Transfer the sibling's children to this node.</li></ul></li></ol>
<p>Once the sought value is reached, it can now be placed at the removed entry's location without a problem because we have ensured that the leaf node has more than 1 key.
</p><p>Deletion in a 2–3–4 tree is O(log n), assuming transfer and fusion run in constant time (O(1)).<sup class="reference" id="cite_ref-ford_3-1">[3]</sup><sup class="reference" id="cite_ref-5">[5]</sup>
</p>
<h2><span class="mw-headline" id="Parallel_operations">Parallel operations</span><span class="mw-editsection"></span></h2>
<p>Since 2–3–4 trees are similar in structure to red–black trees, parallel algorithms for red–black trees can be applied to 2–3–4 trees as well.
</p>
<h2><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"></span></h2>
<style data-mw-deduplicate="TemplateStyles:r1128808480">.mw-parser-output .portalbox{padding:0;display:table;box-sizing:border-box;max-width:175px}.mw-parser-output .portalborder{border:solid #aaa 1px;padding:0.1em;background:#f9f9f9}.mw-parser-output .portalbox-entry{display:table-row;font-size:85%;line-height:110%;font-style:italic;font-weight:bold}.mw-parser-output .portalbox-image{display:table-cell;padding:0.2em;vertical-align:middle;text-align:center}.mw-parser-output .portalbox-link{display:table-cell;padding:0.2em 0.2em 0.2em 0.3em;vertical-align:middle}@media(min-width:720px){.mw-parser-output .portalleft{clear:left;float:left;margin:0.5em 1em 0.5em 0}.mw-parser-output .portalright{clear:right;float:right;margin:0.5em 0 0.5em 1em}}</style>
<ul><li>2–3 tree</li>
<li>Red–black tree</li>
<li>B-tree</li>
<li>Queap</li></ul>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"></span></h2>
<style data-mw-deduplicate="TemplateStyles:r1011085734">.mw-parser-output .reflist{font-size:90%;margin-bottom:0.5em;list-style-type:decimal}.mw-parser-output .reflist .references{font-size:100%;margin-bottom:0;list-style-type:inherit}.mw-parser-output .reflist-columns-2{column-width:30em}.mw-parser-output .reflist-columns-3{column-width:25em}.mw-parser-output .reflist-columns{margin-top:0.3em}.mw-parser-output .reflist-columns ol{margin-top:0}.mw-parser-output .reflist-columns li{page-break-inside:avoid;break-inside:avoid-column}.mw-parser-output .reflist-upper-alpha{list-style-type:upper-alpha}.mw-parser-output .reflist-upper-roman{list-style-type:upper-roman}.mw-parser-output .reflist-lower-alpha{list-style-type:lower-alpha}.mw-parser-output .reflist-lower-greek{list-style-type:lower-greek}.mw-parser-output .reflist-lower-roman{list-style-type:lower-roman}</style>
<h2><span class="mw-headline" id="External_links">External links</span><span class="mw-editsection"></span></h2>
<style data-mw-deduplicate="TemplateStyles:r1097025294">.mw-parser-output .side-box{margin:4px 0;box-sizing:border-box;border:1px solid #aaa;font-size:88%;line-height:1.25em;background-color:#f9f9f9}.mw-parser-output .side-box-abovebelow,.mw-parser-output .side-box-text{padding:0.25em 0.9em}.mw-parser-output .side-box-image{padding:2px 0 2px 0.9em;text-align:center}.mw-parser-output .side-box-imageright{padding:2px 0.9em 2px 0;text-align:center}@media(min-width:500px){.mw-parser-output .side-box-flex{display:flex;align-items:center}.mw-parser-output .side-box-text{flex:1}}@media(min-width:720px){.mw-parser-output .side-box{width:238px}.mw-parser-output .side-box-right{clear:right;float:right;margin-left:1em}.mw-parser-output .side-box-left{margin-right:1em}}</style>
<ul><li>Algorithms In Action, with 2–3–4 Tree animation</li>
<li>Left-leaning Red–Black Trees – Robert Sedgewick, Princeton University, 2008</li>
<li>Open Data Structures – Section 9.1 – 2–4 Trees , Pat Morin</li>
<li>2–3–4 Trees: A Visual Introduction, 2017</li></ul>

<!-- 
NewPP limit report
Parsed by mw2392
Cached time: 20221222034222
Cache expiry: 1814400
Reduced expiry: false
Complications: [vary‐revision‐sha1, show‐toc]
CPU time usage: 0.232 seconds
Real time usage: 0.325 seconds
Preprocessor visited node count: 1232/1000000
Post‐expand include size: 33666/2097152 bytes
Template argument size: 1270/2097152 bytes
Highest expansion depth: 14/100
Expensive parser function count: 1/500
Unstrip recursion depth: 1/20
Unstrip post‐expand size: 24356/5000000 bytes
Lua time usage: 0.137/10.000 seconds
Lua memory usage: 5190479/52428800 bytes
Number of Wikibase entities loaded: 0/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  273.154      1 -total
 34.93%   95.409      1 Template:Reflist
 23.07%   63.028      1 Template:Cite_book
 21.04%   57.469      1 Template:Infobox_data_structure
 19.85%   54.230      1 Template:Infobox
 16.47%   44.987      1 Template:Commons_category
 15.74%   42.998      1 Template:Sister_project
 15.13%   41.333      1 Template:Side_box
 15.12%   41.293      1 Template:CS-Trees
 13.51%   36.894      1 Template:Navbox
-->
<!-- Saved in parser cache with key enwiki:pcache:idhash:1290806-0!canonical and timestamp 20221222034222 and revision id 1076478483.
 -->
</div></body>
</html>